<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>OffsetFactory (Apache SystemDS 2.3.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="OffsetFactory (Apache SystemDS 2.3.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var pathtoroot = "../../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OffsetFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.sysds.runtime.compress.colgroup.offset</a></div>
<h2 title="Interface OffsetFactory" class="title">Interface OffsetFactory</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public interface <span class="typeNameLabel">OffsetFactory</span></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="OffsetFactory.OFF_TYPE.html" title="enum in org.apache.sysds.runtime.compress.colgroup.offset">OffsetFactory.OFF_TYPE</a></span></code></th>
<td class="colLast">
<div class="block">The specific underlying types of offsets.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.apache.commons.logging.Log</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#LOG">LOG</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span>Static Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#correctionByte(int,int)">correctionByte</a></span>&#8203;(int&nbsp;nRows,
              int&nbsp;size)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#correctionChar(int,int)">correctionChar</a></span>&#8203;(int&nbsp;nRows,
              int&nbsp;size)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="AOffset.html" title="class in org.apache.sysds.runtime.compress.colgroup.offset">AOffset</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createOffset(int%5B%5D)">createOffset</a></span>&#8203;(int[]&nbsp;indexes)</code></th>
<td class="colLast">
<div class="block">Main factory pattern creator for Offsets.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static <a href="AOffset.html" title="class in org.apache.sysds.runtime.compress.colgroup.offset">AOffset</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createOffset(int%5B%5D,int,int)">createOffset</a></span>&#8203;(int[]&nbsp;indexes,
            int&nbsp;apos,
            int&nbsp;alen)</code></th>
<td class="colLast">
<div class="block">Create a Offset based on a subset of the indexes given.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="AOffset.html" title="class in org.apache.sysds.runtime.compress.colgroup.offset">AOffset</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createOffset(org.apache.sysds.runtime.compress.utils.IntArrayList)">createOffset</a></span>&#8203;(<a href="../../utils/IntArrayList.html" title="class in org.apache.sysds.runtime.compress.utils">IntArrayList</a>&nbsp;indexes)</code></th>
<td class="colLast">
<div class="block">Create the offsets based on our primitive IntArrayList.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#estimateInMemorySize(int,int)">estimateInMemorySize</a></span>&#8203;(int&nbsp;size,
                    int&nbsp;nRows)</code></th>
<td class="colLast">
<div class="block">Avg diff only works assuming a normal distribution of the offsets.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static <a href="AOffset.html" title="class in org.apache.sysds.runtime.compress.colgroup.offset">AOffset</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readIn(java.io.DataInput)">readIn</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/DataInput.html?is-external=true" title="class or interface in java.io" class="externalLink">DataInput</a>&nbsp;in)</code></th>
<td class="colLast">
<div class="block">Read in AOffset from the DataInput.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="LOG">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LOG</h4>
<pre>static final&nbsp;org.apache.commons.logging.Log LOG</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="createOffset(int[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createOffset</h4>
<pre class="methodSignature">static&nbsp;<a href="AOffset.html" title="class in org.apache.sysds.runtime.compress.colgroup.offset">AOffset</a>&nbsp;createOffset&#8203;(int[]&nbsp;indexes)</pre>
<div class="block">Main factory pattern creator for Offsets.
 
 Note this creator is unsafe it is assumed that the input index list only contain sequential non duplicate
 incrementing values.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>indexes</code> - List of indexes, that is assumed to be sorted and have no duplicates</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>AOffset object containing offsets to the next value.</dd>
</dl>
</li>
</ul>
<a id="createOffset(org.apache.sysds.runtime.compress.utils.IntArrayList)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createOffset</h4>
<pre class="methodSignature">static&nbsp;<a href="AOffset.html" title="class in org.apache.sysds.runtime.compress.colgroup.offset">AOffset</a>&nbsp;createOffset&#8203;(<a href="../../utils/IntArrayList.html" title="class in org.apache.sysds.runtime.compress.utils">IntArrayList</a>&nbsp;indexes)</pre>
<div class="block">Create the offsets based on our primitive IntArrayList.
 
 Note this creator is unsafe it is assumed that the input index list only contain sequential non duplicate
 incrementing values.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>indexes</code> - The List of indexes, that is assumed to be sorted and have no duplicates</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>AOffset object containing offsets to the next value.</dd>
</dl>
</li>
</ul>
<a id="createOffset(int[],int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createOffset</h4>
<pre class="methodSignature">static&nbsp;<a href="AOffset.html" title="class in org.apache.sysds.runtime.compress.colgroup.offset">AOffset</a>&nbsp;createOffset&#8203;(int[]&nbsp;indexes,
                            int&nbsp;apos,
                            int&nbsp;alen)</pre>
<div class="block">Create a Offset based on a subset of the indexes given.
 
 This is useful if the input is created from a CSR matrix, since it allows us to not reallocate the indexes[] but
 use the shared indexes from the entire CSR representation.
 
 Note this creator is unsafe it is assumed that the input index list only contain sequential non duplicate
 incrementing values.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>indexes</code> - The indexes from which to take the offsets.</dd>
<dd><code>apos</code> - The position to start looking from in the indexes.</dd>
<dd><code>alen</code> - The position to end looking at in the indexes.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A new Offset.</dd>
</dl>
</li>
</ul>
<a id="readIn(java.io.DataInput)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readIn</h4>
<pre class="methodSignature">static&nbsp;<a href="AOffset.html" title="class in org.apache.sysds.runtime.compress.colgroup.offset">AOffset</a>&nbsp;readIn&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/DataInput.html?is-external=true" title="class or interface in java.io" class="externalLink">DataInput</a>&nbsp;in)
               throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Read in AOffset from the DataInput.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>in</code> - DataInput to read from</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The AOffset data instance</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - If the DataInput fails reading in the variables</dd>
</dl>
</li>
</ul>
<a id="estimateInMemorySize(int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateInMemorySize</h4>
<pre class="methodSignature">static&nbsp;long&nbsp;estimateInMemorySize&#8203;(int&nbsp;size,
                                 int&nbsp;nRows)</pre>
<div class="block">Avg diff only works assuming a normal distribution of the offsets. This means that if we have 1000 rows and 100
 offsets, it is assumed that on average the distance between elements is 10.
 
 Optionally todo is to add some number of size if the average distance is almost the same as the max value of the
 OffsetLists. this would add to the estimated size and approximate better the real compression size. It would also
 then handle edge cases better.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>size</code> - The estimated number of offsets</dd>
<dd><code>nRows</code> - The number of rows.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The estimated size of an offset given the number of offsets and rows.</dd>
</dl>
</li>
</ul>
<a id="correctionByte(int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>correctionByte</h4>
<pre class="methodSignature">static&nbsp;int&nbsp;correctionByte&#8203;(int&nbsp;nRows,
                          int&nbsp;size)</pre>
</li>
</ul>
<a id="correctionChar(int,int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>correctionChar</h4>
<pre class="methodSignature">static&nbsp;int&nbsp;correctionChar&#8203;(int&nbsp;nRows,
                          int&nbsp;size)</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OffsetFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2022 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
